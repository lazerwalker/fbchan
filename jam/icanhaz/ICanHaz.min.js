(function(){var o=function(){function b(a){return(""+a).replace(/&(?!\w+;)|[<>"']/g,function(a){return n[a]||a})}var e=Object.prototype.toString;Array.isArray=Array.isArray||function(a){return"[object Array]"==e.call(a)};var k=String.prototype.trim,i;if(k)i=function(a){return null==a?"":k.call(a)};else{var g,h;/\S/.test("\u00a0")?(g=/^[\s\xA0]+/,h=/[\s\xA0]+$/):(g=/^\s+/,h=/\s+$/);i=function(a){return a==null?"":a.toString().replace(g,"").replace(h,"")}}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;",
"'":"&#39;"},l={},m=function(){};m.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,d,c,f){f||(this.context=d,this.buffer=[]);if(this.includes("",a)){var a=this.render_pragmas(a),j=this.render_section(a,d,c);!1===j&&(j=this.render_tags(a,d,c,f));if(f)return j;this.sendLines(j)}else{if(f)return a;this.send(a)}},send:function(a){""!==a&&this.buffer.push(a)},sendLines:function(a){if(a)for(var a=a.split("\n"),d=0;d<a.length;d++)this.send(a[d])},
render_pragmas:function(a){if(!this.includes("%",a))return a;var d=this,c=this.getCachedRegex("render_pragmas",function(a,d){return RegExp(a+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+d,"g")});return a.replace(c,function(a,c,e){if(!d.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};d.pragmas[c]={};e&&(a=e.split("="),d.pragmas[c][a[0]]=a[1]);return""})},render_partial:function(a,d,c){a=i(a);if(!c||void 0===c[a])throw{message:"unknown_partial '"+a+"'"};
return!d||"object"!=typeof d[a]?this.render(c[a],d,c,!0):this.render(c[a],d[a],c,!0)},render_section:function(a,d,c){if(!this.includes("#",a)&&!this.includes("^",a))return!1;var f=this,j=this.getCachedRegex("render_section",function(a,c){return RegExp("^([\\s\\S]*?)"+a+"(\\^|\\#)\\s*(.+)\\s*"+c+"\n*([\\s\\S]*?)"+a+"\\/\\s*\\3\\s*"+c+"\\s*([\\s\\S]*)$","g")});return a.replace(j,function(a,j,e,b,g,i){var a=j?f.render_tags(j,d,c,!0):"",i=i?f.render(i,d,c,!0):"",h,b=f.find(b,d);"^"===e?h=!b||Array.isArray(b)&&
0===b.length?f.render(g,d,c,!0):"":"#"===e&&(h=Array.isArray(b)?f.map(b,function(a){return f.render(g,f.create_context(a),c,!0)}).join(""):f.is_object(b)?f.render(g,f.create_context(b),c,!0):"function"==typeof b?b.call(d,g,function(a){return f.render(a,d,c,!0)}):b?f.render(g,d,c,!0):"");return a+h+i})},render_tags:function(a,d,c,f){for(var j=this,e=function(){return j.getCachedRegex("render_tags",function(a,c){return RegExp(a+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+c+"+","g")})},g=e(),i=function(a,f,h){switch(f){case "!":return"";
case "=":return j.set_delimiters(h),g=e(),"";case ">":return j.render_partial(h,d,c);case "{":case "&":return j.find(h,d);default:return b(j.find(h,d))}},a=a.split("\n"),h=0;h<a.length;h++)a[h]=a[h].replace(g,i,this),f||this.send(a[h]);if(f)return a.join("\n")},set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)",
"g"));return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,d){function c(a){return!1===a||0===a||a}var a=i(a),f;if(a.match(/([a-z_]+)\./ig)){var b=this.walk_context(a,d);c(b)&&(f=b)}else c(d[a])?f=d[a]:c(this.context[a])&&(f=this.context[a]);return"function"==typeof f?f.apply(d):void 0!==f?f:""},walk_context:function(a,d){for(var c=a.split("."),f=void 0!=d[c[0]]?d:this.context,b=f[c.shift()];void 0!=b&&0<c.length;)f=b,b=b[c.shift()];return"function"==typeof b?b.apply(f):b},includes:function(a,
d){return-1!=d.indexOf(this.otag+a)},create_context:function(a){if(this.is_object(a))return a;var d=".";this.pragmas["IMPLICIT-ITERATOR"]&&(d=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};c[d]=a;return c},is_object:function(a){return a&&"object"==typeof a},map:function(a,d){if("function"==typeof a.map)return a.map(d);for(var c=[],b=a.length,e=0;e<b;e++)c.push(d(a[e]));return c},getCachedRegex:function(a,d){var c=l[this.otag];c||(c=l[this.otag]={});var b=c[this.ctag];b||(b=c[this.ctag]={});
(c=b[a])||(c=b[a]=d(this.otag,this.ctag));return c}};return{name:"mustache.js",version:"0.4.0",to_html:function(a,b,c,f){var e=new m;f&&(e.send=f);e.render(a,b||{},c);if(!f)return e.buffer.join("\n")}}}();(function(){var b={VERSION:"0.10.1",templates:{},$:"undefined"!==typeof window?window.jQuery||window.Zepto||null:null,addTemplate:function(e,k){if("object"===typeof e)for(var i in e)this.addTemplate(i,e[i]);else b[e]?console.error("Invalid name: "+e+"."):b.templates[e]?console.error('Template "'+
e+'  " exists'):(b.templates[e]=k,b[e]=function(g,h){var g=g||{},i=o.to_html(b.templates[e],g,b.templates);return b.$&&!h?b.$(i):i})},clearAll:function(){for(var e in b.templates)delete b[e];b.templates={}},refresh:function(){b.clearAll();b.grabTemplates()},grabTemplates:function(){var e,k,i=document.getElementsByTagName("script"),g,h=[];e=0;for(k=i.length;e<k;e++)if((g=i[e])&&g.innerHTML&&g.id&&("text/html"===g.type||"text/x-icanhaz"===g.type))b.addTemplate(g.id,"".trim?g.innerHTML.trim():g.innerHTML.replace(/^\s+/,
"").replace(/\s+$/,"")),h.unshift(g);e=0;for(k=h.length;e<k;e++)h[e].parentNode.removeChild(h[e])}};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports.ich=b):this.ich=b;"undefined"!==typeof document&&(b.$?b.$(function(){b.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){b.grabTemplates()},!0))})()})();
